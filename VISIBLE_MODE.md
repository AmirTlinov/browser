# Режим видимого браузера

AI может управлять браузером в видимом окне, чтобы вы могли наблюдать за его действиями.

## Быстрый старт

```bash
# По умолчанию браузер уже в видимом режиме
python3 tests/demo_visible.py
```

Откроется браузер и вы увидите пошаговую демонстрацию действий AI.

## Настройка видимости

### Переменные окружения:

```bash
# Видимый режим (по умолчанию)
export MCP_HEADLESS=0

# Размер окна (ширина,высота)
export MCP_WINDOW_SIZE=1920,1080

# Запуск развёрнутым на весь экран
# (по умолчанию: --start-maximized)
```

### Headless режим (если нужен):

```bash
# Невидимый режим (для production/серверов)
export MCP_HEADLESS=1
```

## Примеры использования

### 1. Интерактивная демонстрация

```bash
python3 tests/demo_visible.py
```

Показывает:
- Открытие страницы
- Ввод текста
- Клики по элементам
- Скроллинг
- Hover эффекты
- Скриншоты

### 2. Запуск MCP сервера с видимым окном

```bash
./scripts/run_visible_browser.sh
```

Браузер откроется и будет ждать команд от AI агента.

### 3. Кастомный размер окна

```bash
export MCP_WINDOW_SIZE=1280,720
python3 tests/demo_visible.py
```

### 4. Полноэкранный режим

```bash
export MCP_WINDOW_SIZE=1920,1080
export MCP_BROWSER_FLAGS="--start-fullscreen"
python3 tests/demo_visible.py
```

## Что видно в браузере

Когда AI работает, вы увидите:

✅ Навигацию по страницам
✅ Ввод текста в поля
✅ Клики по кнопкам и ссылкам
✅ Скроллинг страницы
✅ Hover эффекты
✅ Выбор опций в dropdown
✅ Изменение размера окна

## Отладка

Если браузер не открывается:

1. **Проверьте порт CDP:**
   ```bash
   lsof -i :9222
   # Если занят, закройте процесс или измените порт
   export MCP_BROWSER_PORT=9223
   ```

2. **Проверьте браузер:**
   ```bash
   echo $MCP_BROWSER_BINARY
   # Если пусто, будет использован автопоиск Chromium
   ```

3. **Проверьте профиль:**
   ```bash
   ls ~/.gemini/antigravity-browser-profile/
   # Должна быть папка с профилем
   ```

## Сравнение режимов

| Параметр | Видимый (MCP_HEADLESS=0) | Headless (MCP_HEADLESS=1) |
|----------|--------------------------|---------------------------|
| Окно браузера | ✅ Открыто | ❌ Скрыто |
| Скорость | Нормальная | Быстрее |
| Ресурсы | Больше RAM | Меньше RAM |
| Отладка | ✅ Удобно | ❌ Сложнее |
| Использование | Разработка, демо | Production, CI/CD |
| Скриншоты | ✅ Реальные | ✅ Работают |

## Рекомендации

**Для разработки/тестирования:**
- Используйте видимый режим (по умолчанию)
- Размер окна 1280x900 удобен для большинства задач

**Для production:**
- Используйте headless режим (`MCP_HEADLESS=1`)
- Меньше потребление ресурсов
- Работает на серверах без GUI

**Для демонстраций:**
- Видимый режим + полноэкранный
- `MCP_WINDOW_SIZE=1920,1080`
- Запуск через `tests/demo_visible.py`
